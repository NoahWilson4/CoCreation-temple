var tt=Temple.fromSelector;!function(a){a.fn.serializeObject=function(){var b=this,c={},d={},e={validate:/^[a-zA-Z][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_]+$/};return this.build=function(a,b,c){return a[b]=c,a},this.push_counter=function(a){return void 0===d[a]&&(d[a]=0),d[a]++},a.each(a(this).serializeArray(),function(){if(e.validate.test(this.name)){for(var d,f=this.name.match(e.key),g=this.value,h=this.name;void 0!==(d=f.pop());)h=h.replace(new RegExp("\\["+d+"\\]$"),""),d.match(e.push)?g=b.build([],b.push_counter(h),g):d.match(e.fixed)?g=b.build([],d,g):d.match(e.named)&&(g=b.build({},d,g));c=a.extend(!0,c,g)}}),c}}(jQuery);var CreateForm=Temple.DOM.form.extend({render:function(a,b,c){c&&this.append(tt("legend",c)),this.style({background:"white",padding:"20px",width:"75%",margin:"auto",border:"1px solid lightgray"});var d=tt("div.row");a.map(function(a){var b=tt("div.row",tt("div.form-group.pad").append(tt("label.col-sm-3.control-label",a.label),tt("div.col-sm-9").append(tt("input").attr({type:a.type,placeholder:a.placeholder,name:a.name}))));d.append(b)});var e=tt("button.submit-form","Submit");this.append(d,e),this.addEventListener("submit",b)}}),inputName={label:"Name: ",name:"user",placeholder:"Name...",type:"text"},inputEmail={label:"Email: ",name:"email",placeholder:"Email...",type:"email"},inputPassword={label:"Password: ",name:"password",placeholder:"Password...",type:"text"},inputLocation={label:"Location: ",name:"location",placeholder:"Location...",type:"text"},inputBirthdate={label:"Birthdate: ",name:"birthdate",placeholder:"Birthdate...",type:"date"},createNewUser=function(a){console.log("submitted."),a.preventDefault();var b=$(a.target),c=$(b).serializeObject();console.log("data:",c);var d=users.create(c);console.log("newUser: ",d)},Navbar=Backbone.View.extend({tagName:"div",template:JST.navbar,data:{userName:"User's Name"},render:function(){return this.el.innerHTML=this.template(this.data),this}}),User=Backbone.Model.extend({defaults:function(){var a=new Date,b={joined:a,newUser:!0};return b},signIn:function(){},signOut:function(){}}),Users=Backbone.Collection.extend({model:User}),CocreationContainer=Temple.DOM.div.extend({render:function(a){this.append(tt("div.song-outer-container").append(tt("div.song-inner-container").append(tt("div.song-header").append(tt("canvas.visuals-main"),tt("div.song-info").append(tt("h1",a.songName),tt("p",a.songDescription),tt("div.transport").append(tt("button#play.btn.btn-lg.btn-success","Play"),tt("button#stop.btn.btn-lg.btn-danger","Stop")))),tt("ul#track-container"),tt("div.transport2").append(tt("button#create-track-slot.btn.btn-default","New Instrument Slot"),tt("button#download-song.btn.btn-default","Download Song"),tt("button#like-song.btn.btn-default","Like Song"),tt("button#share-song.btn.btn-default","Share Song"))))),this.addEventListener("click","#play",function(){console.log("play song.")}),this.addEventListener("click","#stop",function(){console.log("stop song.")}),this.addEventListener("click","#create-track-slot",function(){(new TrackSlot).mount().paint("#track-container")})}}),TrackContent=Temple.DOM.div.extend({render:function(a){this.addClass("track-content").append(tt("div.track-user-image"),tt("div.track-user-info-box").append(tt("div.track-user-name",a.userName),tt("div.track-title",a.trackTitle),tt("button.like.like-track.btn.btn-xs.btn-primary").append(tt("i.fa.fa-thumbs-o-up")),tt("div.likes",a.likes+" Likes")))}}),TrackSlot=Temple.DOM.li.extend({initialize:function(){console.log("initializing.")},trackVolume:77,getTrackVolume:function(){return this.trackVolume},render:function(a){var b;b=a&&a.instrument?tt("h3",a.instrument):tt("h3","instrumentName");var c;a?c="":(console.log("testing.."),c=tt("div.instrument-input").append(tt("input#instrument-input").attr({type:"text"}),tt("button#create-instrument.btn.btn-sm.btn-default","Create").addEventListener("click",function(){this.stop();var a=$("#instrument-input").val();$(this).closest(".track-container").find("h3").text(a),$(".instrument-input").remove()}),tt("button#cancel.btn.btn-sm.btn-default","Cancel").addEventListener("click",function(){this.stop(),$(this).closest(".track-container").remove()}))),a&&a.trackVolume&&(this.trackVolume=a.trackVolume),this.addClass("track-li").append(tt("div.track-container").append(b,tt("div.container").append(tt("div.row").append(tt("div.track-controls.col-xs-5.col-sm-4.col-md-3").append(tt("select#track-select.select-track.btn.btn-default").append(tt("option","Select Track")),tt("div#upload-download.upload-download.shadow").append(tt("button.btn.btn-default.btn-xs","Upload"),tt("a").append(tt("button.btn.btn-default.btn-xs","Download"))),tt("button.play-track.btn.btn-xs.btn-success").append(tt("i.fa.fa-play-circle")),tt("button.mute.btn.btn-xs.btn-danger","M"),tt("div.track-volume-label","Track Volume:"),tt("input.track-volume").attr({type:"range",name:"track-volume",min:0,max:100,value:this.getTrackVolume()})),tt("div#track-content.col-xs-7.col-sm-8.col-md-9"))),c)),this.addEventListener("change",".track-volume",function(a){this.trackVolume=a.target.value,console.log("new trackVolume",this.trackVolume)})}}),users=new Users,songInfo={songName:"Song Name Here",songDescription:"A description of the song goes here."},songContainer=(new CocreationContainer).mount(songInfo).paint("#cocreation"),trackInfo={instrument:"Instrument Name",trackVolume:88};(new TrackSlot).mount(trackInfo).paint("#track-container"),console.log("new TrackSlot: ",new TrackSlot);var trackInfo={userName:"User's Name",trackTitle:"Title of Track",likes:11};(new TrackContent).mount(trackInfo).paint("#track-content");var inputs=[inputName,inputEmail,inputPassword,inputLocation,inputBirthdate];(new CreateForm).mount(inputs,createNewUser,"Create New User").paint("#create-user");